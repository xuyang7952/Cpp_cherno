# å¤åˆ¶ä¸æ‹·è´æ„é€ å‡½æ•°


## ä¸€ã€æ ¸å¿ƒæ¦‚å¿µæ€»è§ˆ


| æ¦‚å¿µ                       | è¯´æ˜                                               |
| -------------------------- | -------------------------------------------------- |
| **æ‹·è´ï¼ˆCopyï¼‰**           | å°†ä¸€ä¸ªå¯¹è±¡çš„æ•°æ®å¤åˆ¶åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¸­ã€‚               |
| **æ‹·è´æ„é€ å‡½æ•°**           | å½“ç”¨ä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡åˆå§‹åŒ–å¦ä¸€ä¸ªæ–°å¯¹è±¡æ—¶è‡ªåŠ¨è°ƒç”¨ã€‚ |
| **æµ…æ‹·è´ï¼ˆShallow Copyï¼‰** | åªå¤åˆ¶æŒ‡é’ˆï¼Œä¸¤ä¸ªå¯¹è±¡å…±äº«åŒä¸€å—å†…å­˜ã€‚å±é™©ï¼         |
| **æ·±æ‹·è´ï¼ˆDeep Copyï¼‰**    | å¤åˆ¶æ•°æ®æœ¬èº«ï¼Œæ¯ä¸ªå¯¹è±¡æ‹¥æœ‰ç‹¬ç«‹å†…å­˜ã€‚å®‰å…¨ï¼         |
| **å¼•ç”¨ä¼ é€’**               | é¿å…ä¸å¿…è¦çš„å¤åˆ¶ï¼Œæé«˜æ€§èƒ½ã€‚                       |


## äºŒã€è¯¦ç»†è§£é‡Š + å›¾è§£è¯´æ˜

### 1. æ‹·è´ vs æŒ‡é’ˆæ‹·è´

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>int</span><span> a = </span>2<span>;
</span><span></span><span>int</span><span> b = a;  </span><span>// âœ… æ‹·è´ï¼ša å’Œ b æ˜¯ä¸¤ä¸ªç‹¬ç«‹å˜é‡</span></code></pre></div></div></pre>

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>Vector2* a = </span><span>new</span><span> Vector2();
</span><span>Vector2* b = a;  </span><span>// âŒ æŒ‡é’ˆæ‹·è´ï¼šb å’Œ a æŒ‡å‘åŒä¸€å†…å­˜</span><span>
</span><span>b->x = </span>5<span>;        </span><span>// ä¿®æ”¹ bï¼Œa ä¹Ÿä¼šå˜ï¼</span></code></pre></div></div></pre>

> ğŸ’¡ **ç»“è®º**ï¼š`T obj1 = obj2;` æ˜¯æ‹·è´ï¼Œ`T* ptr1 = ptr2;` æ˜¯æŒ‡é’ˆèµ‹å€¼ï¼Œä¸æ˜¯æ‹·è´ï¼

---

### 2. æ‹·è´æ„é€ å‡½æ•°ï¼ˆCopy Constructorï¼‰

å½“ç”¨ä¸€ä¸ªå¯¹è±¡åˆå§‹åŒ–å¦ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä¼šè°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>String</span><span> str1 = </span><span>"Cherno"</span><span>;
</span><span></span><span>String</span><span> str2 = str1;  </span><span>// âœ… è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°</span></code></pre></div></div></pre>

å¦‚æœç±»ä¸­æœ‰åŠ¨æ€å†…å­˜ï¼ˆå¦‚ `char*`ï¼‰ï¼ŒC++ é»˜è®¤æä¾›çš„æ˜¯ **æµ…æ‹·è´**ï¼Œè¿™ä¼šå¯¼è‡´é—®é¢˜ï¼

---

### 3. æµ…æ‹·è´çš„é—®é¢˜ï¼ˆå›¾ç‰‡ä¸­çš„å´©æºƒåŸå› ï¼‰

#### ğŸ”¥ é—®é¢˜åœºæ™¯ï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code>class String {<span>
</span><span></span><span>private</span><span>:
</span><span>    </span><span>char</span><span>* m_Buffer;
</span><span>    </span><span>unsigned</span><span> </span><span>int</span><span> m_Size;
</span><span></span><span>public</span><span>:
</span><span>    String(</span><span>const</span><span> </span><span>char</span><span>* </span><span>string</span><span>) {
</span><span>        m_Size = </span><span>strlen</span><span>(</span><span>string</span><span>);
</span><span>        m_Buffer = </span><span>new</span><span> </span><span>char</span><span>[m_Size];  </span><span>// âš ï¸ å¿˜è®° +1ï¼Œä¸”æ²¡åŠ  '\0'</span><span>
</span><span>        </span><span>memcpy</span><span>(m_Buffer, </span><span>string</span><span>, m_Size);
</span>    }
    ~String() {
<span>        </span><span>delete</span><span>[] m_Buffer;  </span><span>// ææ„å‡½æ•°</span><span>
</span>    }
};</code></pre></div></div></pre>

#### ğŸ‘‰ åˆ›å»ºä¸¤ä¸ªå¯¹è±¡ï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>String</span><span> </span><span>string</span><span> = </span><span>"Cherno"</span><span>;
</span><span></span><span>String</span><span> second = </span><span>string</span><span>;  </span><span>// âœ… æ‹·è´æ„é€ å‡½æ•°è¢«è°ƒç”¨</span></code></pre></div></div></pre>

é»˜è®¤æ‹·è´æ„é€ å‡½æ•°æ˜¯**æµ…æ‹·è´**ï¼Œå³ï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>String</span><span>(</span><span>const</span><span> </span><span>String</span><span>& other) : m_Buffer(other.m_Buffer), </span>m_Size(other.m_Size)<span> {}</span></code></pre></div></div></pre>

ç»“æœï¼š

* `string.m_Buffer` å’Œ `second.m_Buffer` æŒ‡å‘**åŒä¸€å—å†…å­˜**
* ä¸¤ä¸ªå¯¹è±¡éƒ½æŒæœ‰åŒä¸€ä¸ª `char*`
* ç¨‹åºç»“æŸæ—¶ï¼Œä¸¤ä¸ªææ„å‡½æ•°éƒ½ä¼šè°ƒç”¨ `delete[] m_Buffer` â†’ **åŒé‡é‡Šæ”¾ï¼å´©æºƒï¼**

> ğŸ”¥ è¿™å°±æ˜¯å›¾ç‰‡ä¸­â€œwntdll.pdb not loadedâ€å´©æºƒçš„åŸå› ï¼

---

### 4. è§£å†³æ–¹æ¡ˆï¼šæ·±æ‹·è´ï¼ˆDeep Copyï¼‰

æˆ‘ä»¬è¦è®©æ¯ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±çš„å†…å­˜ï¼

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>String</span><span>(</span><span>const</span><span> </span><span>String</span><span>& other)
</span><span>    : </span>m_Size(other.m_Size)<span>
</span>{
<span>    m_Buffer = </span><span>new</span><span> char[m_Size + </span>1<span>];  </span><span>// åˆ†é…æ–°å†…å­˜</span><span>
</span><span>    memcpy(m_Buffer, other.m_Buffer, m_Size + </span>1<span>);  </span><span>// å¤åˆ¶å†…å®¹</span><span>
</span>}</code></pre></div></div></pre>

âœ… æ­¤æ—¶ `string` å’Œ `second` å„è‡ªæ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜ï¼Œä¿®æ”¹å…¶ä¸­ä¸€ä¸ªä¸ä¼šå½±å“å¦ä¸€ä¸ªã€‚

---

### 5. å¼•ç”¨ä¼ é€’ vs å€¼ä¼ é€’ï¼ˆé¿å…å¤šä½™æ‹·è´ï¼‰

#### âŒ å€¼ä¼ é€’ï¼ˆå¼•å‘å¤šæ¬¡æ‹·è´ï¼‰ï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code>void PrintString(String string) <span>{  </span><span>// å€¼ä¼ é€’ â†’ è§¦å‘æ‹·è´æ„é€ </span><span>
</span><span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>string</span><span> << </span><span>std</span><span>::</span><span>endl</span><span>;
</span>}</code></pre></div></div></pre>

* å‡½æ•°å‚æ•°ä¼ å…¥æ—¶ï¼šä¸€æ¬¡æ‹·è´
* å‡½æ•°å†…éƒ¨ä½¿ç”¨æ—¶ï¼šå¯èƒ½å†æ‹·è´ä¸€æ¬¡
* æ€§èƒ½å·®ï¼Œå°¤å…¶å¯¹å¤§å¯¹è±¡

#### âœ… å¼•ç”¨ä¼ é€’ï¼ˆæ¨èï¼‰ï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code>void PrintString(const String& string) <span>{  </span><span>// const å¼•ç”¨ â†’ ä¸æ‹·è´</span><span>
</span><span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>string</span><span> << </span><span>std</span><span>::</span><span>endl</span><span>;
</span>}</code></pre></div></div></pre>

* æ— æ‹·è´ï¼Œç›´æ¥è®¿é—®åŸå¯¹è±¡
* æ›´é«˜æ•ˆï¼Œæ›´å®‰å…¨


## ä¸‰ã€å®Œæ•´å¯è¿è¡Œä»£ç ï¼ˆå«æ‰€æœ‰çŸ¥è¯†ç‚¹ï¼‰

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code data-spm-anchor-id="5176.28103460.0.i30.5e842e317ELiV5"><span>#</span>include<span> </span><iostream><span>
</span><span></span><span>#</span>include<span> </span><cstring><span>
</span>
<span></span>class String {<span>
</span><span></span><span>private</span><span>:
</span><span>    </span><span>char</span><span>* m_Buffer;
</span><span>    </span><span>unsigned</span><span> </span><span>int</span><span> m_Size;
</span>
<span></span><span>public</span><span>:
</span><span>    </span><span>// æ„é€ å‡½æ•°</span><span>
</span><span>    String(</span><span>const</span><span> </span><span>char</span><span>* </span><span>string</span><span>) {
</span><span>        m_Size = </span><span>strlen</span><span>(</span><span>string</span><span>);
</span><span>        m_Buffer = </span><span>new</span><span> </span><span>char</span><span>[m_Size + </span>1<span>];  </span><span>// +1 ä¸º '\0'</span><span>
</span><span>        </span><span>memcpy</span><span>(m_Buffer, </span><span>string</span><span>, m_Size + </span>1<span>);
</span>    }

<span>    </span><span>// æ‹·è´æ„é€ å‡½æ•°ï¼ˆæ·±æ‹·è´ï¼‰</span><span>
</span><span>    String(</span><span>const</span><span> String& other)
</span>        : m_Size(other.m_Size)
    {
<span>        m_Buffer = </span><span>new</span><span> </span><span>char</span><span>[m_Size + </span>1<span>];
</span><span>        </span><span>memcpy</span><span>(m_Buffer, other.m_Buffer, m_Size + </span>1<span>);
</span>    }

<span>    </span><span>// ææ„å‡½æ•°</span><span>
</span>    ~String() {
<span>        </span><span>delete</span><span>[] m_Buffer;
</span>    }

<span>    </span><span>// é‡è½½è¾“å‡ºè¿ç®—ç¬¦</span><span>
</span><span>    </span><span>friend</span><span> </span><span>std</span><span>::ostream& </span><span>operator</span><span><<(</span><span>std</span><span>::ostream& stream, </span><span>const</span><span> String& </span><span>string</span><span>) {
</span><span>        stream << </span><span>string</span><span>.m_Buffer;
</span><span>        </span><span>return</span><span> stream;
</span>    }

<span>    </span><span>// é‡è½½ [] æ“ä½œç¬¦</span><span>
</span><span>    </span><span>char</span><span>& </span><span>operator</span><span>[](</span><span>unsigned</span><span> </span><span>int</span><span> index) {
</span><span>        </span><span>return</span><span> m_Buffer[index];
</span>    }
};

<span></span><span>// æ‰“å°å‡½æ•°ï¼šä½¿ç”¨ const å¼•ç”¨é¿å…æ‹·è´</span><span>
</span><span></span>void PrintString(const String& string) <span>{
</span><span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>string</span><span> << </span><span>std</span><span>::</span><span>endl</span><span>;
</span>}

<span></span>int main() <span>{
</span><span>    String </span><span>string</span><span> = </span><span>"Cherno"</span><span>;
</span><span>    String second = </span><span>string</span><span>;  </span><span>// è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼ˆæ·±æ‹·è´ï¼‰</span><span>
</span>
<span>    second[</span>2<span>] = </span><span>'a'</span><span>;  </span><span>// ä¿®æ”¹ secondï¼Œä¸å½±å“ string</span><span>
</span>
<span>    PrintString(</span><span>string</span><span>);  </span><span>// è¾“å‡º: Cherno</span><span>
</span><span>    PrintString(second); </span><span>// è¾“å‡º: Charo</span><span>
</span>
<span>    </span><span>std</span><span>::</span><span>cin</span><span>.get();  </span><span>// ç­‰å¾…è¾“å…¥</span><span>
</span><span>    </span><span>return</span><span> </span>0<span>;
</span>}</code></pre></div></div></pre>

---

## ğŸ“Š å››ã€è¿è¡Œç»“æœ

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">text</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>Cherno
</span>Charo</code></pre></div></div></pre>

> âœ… æˆåŠŸï¼æ²¡æœ‰å´©æºƒï¼Œæ²¡æœ‰å†…å­˜æ³„æ¼ï¼Œä¿®æ”¹ `second` ä¸å½±å“ `string`ã€‚


## äº”ã€æ€»ç»“å›¾è§£ï¼ˆæ–‡å­—ç‰ˆï¼‰

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">text</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>æµ…æ‹·è´ï¼ˆé”™è¯¯ï¼‰ï¼š
</span><span>   </span><span>string</span><span>.m_Buffer â†’ [å†…å­˜å—] â† second.m_Buffer
</span>                    â†‘
<span>                   å…±äº«å†…å­˜ â†’ ä¸¤ä¸ªææ„å‡½æ•°éƒ½ </span><span>delete</span><span> â†’ åŒé‡é‡Šæ”¾ â†’ å´©æºƒï¼
</span>
æ·±æ‹·è´ï¼ˆæ­£ç¡®ï¼‰ï¼š
<span>   </span><span>string</span><span>.m_Buffer â†’ [å†…å­˜å—A]
</span>   second.m_Buffer â†’ [å†…å­˜å—B]
                    â†‘
<span>                   ç‹¬ç«‹å†…å­˜ â†’ å„è‡ª </span><span>delete</span><span> â†’ å®‰å…¨ï¼
</span>
å¼•ç”¨ä¼ é€’ï¼š
<span>   PrintString(</span><span>const</span><span> String& </span><span>string</span><span>) â†’ ç›´æ¥è®¿é—®åŸå§‹å¯¹è±¡ï¼Œä¸æ‹·è´</span></code></pre></div></div></pre>

---

## âœ… å…­ã€æœ€ä½³å®è·µå»ºè®®


| åœºæ™¯                    | æ¨èæ–¹å¼                            |
| ----------------------- | ----------------------------------- |
| ç±»åŒ…å«åŠ¨æ€å†…å­˜ï¼ˆ`new`ï¼‰ | âœ… å¿…é¡»å®ç°æ·±æ‹·è´æ„é€ å‡½æ•°å’Œææ„å‡½æ•° |
| ä¼ é€’å¤§å¯¹è±¡ç»™å‡½æ•°        | âœ… ä½¿ç”¨`const T&` å¼•ç”¨ä¼ é€’          |
| ä¸å…è®¸æ‹·è´              | âœ… å°†æ‹·è´æ„é€ å‡½æ•°å£°æ˜ä¸º`= delete`   |
| æƒ³é¿å…å¤åˆ¶              | âœ… ä½¿ç”¨`std::move` æˆ–æ™ºèƒ½æŒ‡é’ˆ       |
