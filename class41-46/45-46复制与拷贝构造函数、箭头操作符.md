# å¤åˆ¶ä¸æ‹·è´æ„é€ å‡½æ•°

## ä¸€ã€æ ¸å¿ƒæ¦‚å¿µæ€»è§ˆ


| æ¦‚å¿µ                       | è¯´æ˜                                               |
| -------------------------- | -------------------------------------------------- |
| **æ‹·è´ï¼ˆCopyï¼‰**           | å°†ä¸€ä¸ªå¯¹è±¡çš„æ•°æ®å¤åˆ¶åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¸­ã€‚               |
| **æ‹·è´æ„é€ å‡½æ•°**           | å½“ç”¨ä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡åˆå§‹åŒ–å¦ä¸€ä¸ªæ–°å¯¹è±¡æ—¶è‡ªåŠ¨è°ƒç”¨ã€‚ |
| **æµ…æ‹·è´ï¼ˆShallow Copyï¼‰** | åªå¤åˆ¶æŒ‡é’ˆï¼Œä¸¤ä¸ªå¯¹è±¡å…±äº«åŒä¸€å—å†…å­˜ã€‚å±é™©ï¼         |
| **æ·±æ‹·è´ï¼ˆDeep Copyï¼‰**    | å¤åˆ¶æ•°æ®æœ¬èº«ï¼Œæ¯ä¸ªå¯¹è±¡æ‹¥æœ‰ç‹¬ç«‹å†…å­˜ã€‚å®‰å…¨ï¼         |
| **å¼•ç”¨ä¼ é€’**               | é¿å…ä¸å¿…è¦çš„å¤åˆ¶ï¼Œæé«˜æ€§èƒ½ã€‚                       |

## äºŒã€è¯¦ç»†è§£é‡Š + å›¾è§£è¯´æ˜

### 1. æ‹·è´ vs æŒ‡é’ˆæ‹·è´

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>int</span><span> a = </span>2<span>;
</span><span></span><span>int</span><span> b = a;  </span><span>// âœ… æ‹·è´ï¼ša å’Œ b æ˜¯ä¸¤ä¸ªç‹¬ç«‹å˜é‡</span></code></pre></div></div></pre>

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>Vector2* a = </span><span>new</span><span> Vector2();
</span><span>Vector2* b = a;  </span><span>// âŒ æŒ‡é’ˆæ‹·è´ï¼šb å’Œ a æŒ‡å‘åŒä¸€å†…å­˜</span><span>
</span><span>b->x = </span>5<span>;        </span><span>// ä¿®æ”¹ bï¼Œa ä¹Ÿä¼šå˜ï¼</span></code></pre></div></div></pre>

> ğŸ’¡ **ç»“è®º**ï¼š`T obj1 = obj2;` æ˜¯æ‹·è´ï¼Œ`T* ptr1 = ptr2;` æ˜¯æŒ‡é’ˆèµ‹å€¼ï¼Œä¸æ˜¯æ‹·è´ï¼

---

### 2. æ‹·è´æ„é€ å‡½æ•°ï¼ˆCopy Constructorï¼‰

å½“ç”¨ä¸€ä¸ªå¯¹è±¡åˆå§‹åŒ–å¦ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä¼šè°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>String</span><span> str1 = </span><span>"Cherno"</span><span>;
</span><span></span><span>String</span><span> str2 = str1;  </span><span>// âœ… è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°</span></code></pre></div></div></pre>

å¦‚æœç±»ä¸­æœ‰åŠ¨æ€å†…å­˜ï¼ˆå¦‚ `char*`ï¼‰ï¼ŒC++ é»˜è®¤æä¾›çš„æ˜¯ **æµ…æ‹·è´**ï¼Œè¿™ä¼šå¯¼è‡´é—®é¢˜ï¼

---

### 3. æµ…æ‹·è´çš„é—®é¢˜ï¼ˆå›¾ç‰‡ä¸­çš„å´©æºƒåŸå› ï¼‰

#### ğŸ”¥ é—®é¢˜åœºæ™¯ï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code>class String {<span>
</span><span></span><span>private</span><span>:
</span><span>    </span><span>char</span><span>* m_Buffer;
</span><span>    </span><span>unsigned</span><span> </span><span>int</span><span> m_Size;
</span><span></span><span>public</span><span>:
</span><span>    String(</span><span>const</span><span> </span><span>char</span><span>* </span><span>string</span><span>) {
</span><span>        m_Size = </span><span>strlen</span><span>(</span><span>string</span><span>);
</span><span>        m_Buffer = </span><span>new</span><span> </span><span>char</span><span>[m_Size];  </span><span>// âš ï¸ å¿˜è®° +1ï¼Œä¸”æ²¡åŠ  '\0'</span><span>
</span><span>        </span><span>memcpy</span><span>(m_Buffer, </span><span>string</span><span>, m_Size);
</span>    }
    ~String() {
<span>        </span><span>delete</span><span>[] m_Buffer;  </span><span>// ææ„å‡½æ•°</span><span>
</span>    }
};</code></pre></div></div></pre>

#### ğŸ‘‰ åˆ›å»ºä¸¤ä¸ªå¯¹è±¡ï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>String</span><span> </span><span>string</span><span> = </span><span>"Cherno"</span><span>;
</span><span></span><span>String</span><span> second = </span><span>string</span><span>;  </span><span>// âœ… æ‹·è´æ„é€ å‡½æ•°è¢«è°ƒç”¨</span></code></pre></div></div></pre>

é»˜è®¤æ‹·è´æ„é€ å‡½æ•°æ˜¯**æµ…æ‹·è´**ï¼Œå³ï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>String</span><span>(</span><span>const</span><span> </span><span>String</span><span>& other) : m_Buffer(other.m_Buffer), </span>m_Size(other.m_Size)<span> {}</span></code></pre></div></div></pre>

ç»“æœï¼š

* `string.m_Buffer` å’Œ `second.m_Buffer` æŒ‡å‘**åŒä¸€å—å†…å­˜**
* ä¸¤ä¸ªå¯¹è±¡éƒ½æŒæœ‰åŒä¸€ä¸ª `char*`
* ç¨‹åºç»“æŸæ—¶ï¼Œä¸¤ä¸ªææ„å‡½æ•°éƒ½ä¼šè°ƒç”¨ `delete[] m_Buffer` â†’ **åŒé‡é‡Šæ”¾ï¼å´©æºƒï¼**

> ğŸ”¥ è¿™å°±æ˜¯å›¾ç‰‡ä¸­â€œwntdll.pdb not loadedâ€å´©æºƒçš„åŸå› ï¼

---

### 4. è§£å†³æ–¹æ¡ˆï¼šæ·±æ‹·è´ï¼ˆDeep Copyï¼‰

æˆ‘ä»¬è¦è®©æ¯ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±çš„å†…å­˜ï¼

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>String</span><span>(</span><span>const</span><span> </span><span>String</span><span>& other)
</span><span>    : </span>m_Size(other.m_Size)<span>
</span>{
<span>    m_Buffer = </span><span>new</span><span> char[m_Size + </span>1<span>];  </span><span>// åˆ†é…æ–°å†…å­˜</span><span>
</span><span>    memcpy(m_Buffer, other.m_Buffer, m_Size + </span>1<span>);  </span><span>// å¤åˆ¶å†…å®¹</span><span>
</span>}</code></pre></div></div></pre>

âœ… æ­¤æ—¶ `string` å’Œ `second` å„è‡ªæ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜ï¼Œä¿®æ”¹å…¶ä¸­ä¸€ä¸ªä¸ä¼šå½±å“å¦ä¸€ä¸ªã€‚

---

### 5. å¼•ç”¨ä¼ é€’ vs å€¼ä¼ é€’ï¼ˆé¿å…å¤šä½™æ‹·è´ï¼‰

#### âŒ å€¼ä¼ é€’ï¼ˆå¼•å‘å¤šæ¬¡æ‹·è´ï¼‰ï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code>void PrintString(String string) <span>{  </span><span>// å€¼ä¼ é€’ â†’ è§¦å‘æ‹·è´æ„é€ </span><span>
</span><span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>string</span><span> << </span><span>std</span><span>::</span><span>endl</span><span>;
</span>}</code></pre></div></div></pre>

* å‡½æ•°å‚æ•°ä¼ å…¥æ—¶ï¼šä¸€æ¬¡æ‹·è´
* å‡½æ•°å†…éƒ¨ä½¿ç”¨æ—¶ï¼šå¯èƒ½å†æ‹·è´ä¸€æ¬¡
* æ€§èƒ½å·®ï¼Œå°¤å…¶å¯¹å¤§å¯¹è±¡

#### âœ… å¼•ç”¨ä¼ é€’ï¼ˆæ¨èï¼‰ï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code>void PrintString(const String& string) <span>{  </span><span>// const å¼•ç”¨ â†’ ä¸æ‹·è´</span><span>
</span><span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>string</span><span> << </span><span>std</span><span>::</span><span>endl</span><span>;
</span>}</code></pre></div></div></pre>

* æ— æ‹·è´ï¼Œç›´æ¥è®¿é—®åŸå¯¹è±¡
* æ›´é«˜æ•ˆï¼Œæ›´å®‰å…¨

## ä¸‰ã€å®Œæ•´å¯è¿è¡Œä»£ç ï¼ˆå«æ‰€æœ‰çŸ¥è¯†ç‚¹ï¼‰

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code data-spm-anchor-id="5176.28103460.0.i30.5e842e317ELiV5"><span>#</span>include<span> </span><iostream><span>
</span><span></span><span>#</span>include<span> </span><cstring><span>
</span>
<span></span>class String {<span>
</span><span></span><span>private</span><span>:
</span><span>    </span><span>char</span><span>* m_Buffer;
</span><span>    </span><span>unsigned</span><span> </span><span>int</span><span> m_Size;
</span>
<span></span><span>public</span><span>:
</span><span>    </span><span>// æ„é€ å‡½æ•°</span><span>
</span><span>    String(</span><span>const</span><span> </span><span>char</span><span>* </span><span>string</span><span>) {
</span><span>        m_Size = </span><span>strlen</span><span>(</span><span>string</span><span>);
</span><span>        m_Buffer = </span><span>new</span><span> </span><span>char</span><span>[m_Size + </span>1<span>];  </span><span>// +1 ä¸º '\0'</span><span>
</span><span>        </span><span>memcpy</span><span>(m_Buffer, </span><span>string</span><span>, m_Size + </span>1<span>);
</span>    }

<span>    </span><span>// æ‹·è´æ„é€ å‡½æ•°ï¼ˆæ·±æ‹·è´ï¼‰</span><span>
</span><span>    String(</span><span>const</span><span> String& other)
</span>        : m_Size(other.m_Size)
    {
<span>        m_Buffer = </span><span>new</span><span> </span><span>char</span><span>[m_Size + </span>1<span>];
</span><span>        </span><span>memcpy</span><span>(m_Buffer, other.m_Buffer, m_Size + </span>1<span>);
</span>    }

<span>    </span><span>// ææ„å‡½æ•°</span><span>
</span>    ~String() {
<span>        </span><span>delete</span><span>[] m_Buffer;
</span>    }

<span>    </span><span>// é‡è½½è¾“å‡ºè¿ç®—ç¬¦</span><span>
</span><span>    </span><span>friend</span><span> </span><span>std</span><span>::ostream& </span><span>operator</span><span><<(</span><span>std</span><span>::ostream& stream, </span><span>const</span><span> String& </span><span>string</span><span>) {
</span><span>        stream << </span><span>string</span><span>.m_Buffer;
</span><span>        </span><span>return</span><span> stream;
</span>    }

<span>    </span><span>// é‡è½½ [] æ“ä½œç¬¦</span><span>
</span><span>    </span><span>char</span><span>& </span><span>operator</span><span>[](</span><span>unsigned</span><span> </span><span>int</span><span> index) {
</span><span>        </span><span>return</span><span> m_Buffer[index];
</span>    }
};

<span></span><span>// æ‰“å°å‡½æ•°ï¼šä½¿ç”¨ const å¼•ç”¨é¿å…æ‹·è´</span><span>
</span><span></span>void PrintString(const String& string) <span>{
</span><span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>string</span><span> << </span><span>std</span><span>::</span><span>endl</span><span>;
</span>}

<span></span>int main() <span>{
</span><span>    String </span><span>string</span><span> = </span><span>"Cherno"</span><span>;
</span><span>    String second = </span><span>string</span><span>;  </span><span>// è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼ˆæ·±æ‹·è´ï¼‰</span><span>
</span>
<span>    second[</span>2<span>] = </span><span>'a'</span><span>;  </span><span>// ä¿®æ”¹ secondï¼Œä¸å½±å“ string</span><span>
</span>
<span>    PrintString(</span><span>string</span><span>);  </span><span>// è¾“å‡º: Cherno</span><span>
</span><span>    PrintString(second); </span><span>// è¾“å‡º: Charo</span><span>
</span>
<span>    </span><span>std</span><span>::</span><span>cin</span><span>.get();  </span><span>// ç­‰å¾…è¾“å…¥</span><span>
</span><span>    </span><span>return</span><span> </span>0<span>;
</span>}</code></pre></div></div></pre>

---

## ğŸ“Š å››ã€è¿è¡Œç»“æœ

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">text</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>Cherno
</span>Charo</code></pre></div></div></pre>

> âœ… æˆåŠŸï¼æ²¡æœ‰å´©æºƒï¼Œæ²¡æœ‰å†…å­˜æ³„æ¼ï¼Œä¿®æ”¹ `second` ä¸å½±å“ `string`ã€‚

## äº”ã€æ€»ç»“å›¾è§£ï¼ˆæ–‡å­—ç‰ˆï¼‰

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">text</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>æµ…æ‹·è´ï¼ˆé”™è¯¯ï¼‰ï¼š
</span><span>   </span><span>string</span><span>.m_Buffer â†’ [å†…å­˜å—] â† second.m_Buffer
</span>                    â†‘
<span>                   å…±äº«å†…å­˜ â†’ ä¸¤ä¸ªææ„å‡½æ•°éƒ½ </span><span>delete</span><span> â†’ åŒé‡é‡Šæ”¾ â†’ å´©æºƒï¼
</span>
æ·±æ‹·è´ï¼ˆæ­£ç¡®ï¼‰ï¼š
<span>   </span><span>string</span><span>.m_Buffer â†’ [å†…å­˜å—A]
</span>   second.m_Buffer â†’ [å†…å­˜å—B]
                    â†‘
<span>                   ç‹¬ç«‹å†…å­˜ â†’ å„è‡ª </span><span>delete</span><span> â†’ å®‰å…¨ï¼
</span>
å¼•ç”¨ä¼ é€’ï¼š
<span>   PrintString(</span><span>const</span><span> String& </span><span>string</span><span>) â†’ ç›´æ¥è®¿é—®åŸå§‹å¯¹è±¡ï¼Œä¸æ‹·è´</span></code></pre></div></div></pre>

---

## âœ… å…­ã€æœ€ä½³å®è·µå»ºè®®


| åœºæ™¯                    | æ¨èæ–¹å¼                            |
| ----------------------- | ----------------------------------- |
| ç±»åŒ…å«åŠ¨æ€å†…å­˜ï¼ˆ`new`ï¼‰ | âœ… å¿…é¡»å®ç°æ·±æ‹·è´æ„é€ å‡½æ•°å’Œææ„å‡½æ•° |
| ä¼ é€’å¤§å¯¹è±¡ç»™å‡½æ•°        | âœ… ä½¿ç”¨`const T&` å¼•ç”¨ä¼ é€’          |
| ä¸å…è®¸æ‹·è´              | âœ… å°†æ‹·è´æ„é€ å‡½æ•°å£°æ˜ä¸º`= delete`   |
| æƒ³é¿å…å¤åˆ¶              | âœ… ä½¿ç”¨`std::move` æˆ–æ™ºèƒ½æŒ‡é’ˆ       |

# pythonä¸­çš„æ‹·è´è¡Œä¸º

## âœ… ä¸€ã€Python æœ‰â€œæ‹·è´æ„é€ å‡½æ•°â€å—ï¼Ÿ

### âŒ æ²¡æœ‰ C++ é‚£ç§â€œæ‹·è´æ„é€ å‡½æ•°â€çš„æ¦‚å¿µã€‚

ä½† Python æœ‰**ç±»ä¼¼çš„æœºåˆ¶**ï¼Œåªæ˜¯æ›´é«˜çº§ã€æ›´è‡ªåŠ¨åŒ–ã€‚

### âœ… Python ä¸­çš„â€œæ‹·è´â€æ–¹å¼ï¼š

1. **ç›´æ¥èµ‹å€¼ï¼ˆ=ï¼‰** â†’ åªæ˜¯**å¼•ç”¨**ï¼Œä¸æ˜¯æ‹·è´
2. **æµ…æ‹·è´ï¼ˆshallow copyï¼‰**
3. **æ·±æ‹·è´ï¼ˆdeep copyï¼‰**

Python æä¾›äº†æ ‡å‡†åº“ `copy` æ¥æ”¯æŒåä¸¤è€…ã€‚

---

## âœ… äºŒã€Python çš„ä¸‰å¤§â€œå¤åˆ¶â€æ–¹å¼å¯¹æ¯”


| æ–¹å¼              | æ˜¯å¦åˆ›å»ºæ–°å¯¹è±¡  | å†…å­˜è¡Œä¸º                   | ç¤ºä¾‹                   |
| ----------------- | --------------- | -------------------------- | ---------------------- |
| `=` èµ‹å€¼          | âŒ å¦           | å¤šä¸ªå˜é‡æŒ‡å‘åŒä¸€å¯¹è±¡       | `b = a`                |
| `copy.copy()`     | âœ… æ˜¯ï¼ˆæµ…æ‹·è´ï¼‰ | ç¬¬ä¸€å±‚å¤åˆ¶ï¼ŒåµŒå¥—å¯¹è±¡ä»å…±äº« | `b = copy.copy(a)`     |
| `copy.deepcopy()` | âœ… æ˜¯ï¼ˆæ·±æ‹·è´ï¼‰ | å®Œå…¨ç‹¬ç«‹ï¼Œé€’å½’å¤åˆ¶æ‰€æœ‰å±‚   | `b = copy.deepcopy(a)` |

æˆ‘ä»¬ç”¨ä»£ç å’Œå›¾è§£æ¥è¯´æ˜ã€‚

---

## âœ… ä¸‰ã€1. ç›´æ¥èµ‹å€¼ï¼šåªæ˜¯â€œå¼•ç”¨â€

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">python</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>import</span><span> copy
</span>
<span>a = [</span>1<span>, </span>2<span>, [</span>3<span>, </span>4<span>]]
</span><span>b = a  </span><span># åªæ˜¯è®© b æŒ‡å‘ a çš„å¯¹è±¡</span><span>
</span>
<span>b[</span>0<span>] = </span>999<span>
</span><span>b[</span>2<span>][</span>0<span>] = </span>888<span>
</span>
<span></span><span>print</span><span>(</span><span>"a:"</span><span>, a)  </span><span># a: [999, 2, [888, 4]]</span><span>
</span><span></span><span>print</span><span>(</span><span>"b:"</span><span>, b)  </span><span># b: [999, 2, [888, 4]]</span></code></pre></div></div></pre>

ğŸ‘‰ `a` å’Œ `b` æ˜¯**åŒä¸€ä¸ªåˆ—è¡¨å¯¹è±¡**ï¼Œä¿®æ”¹ `b` å°±æ˜¯ä¿®æ”¹ `a`ã€‚

> ğŸ”¥ è¿™å°±åƒ C++ ä¸­çš„æŒ‡é’ˆèµ‹å€¼ï¼š`T* b = a;`

---

## âœ… ä¸‰ã€2. æµ…æ‹·è´ï¼ˆShallow Copyï¼‰

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">python</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>a = [</span>1<span>, </span>2<span>, [</span>3<span>, </span>4<span>]]
</span><span>b = copy.copy(a)  </span><span># æµ…æ‹·è´</span><span>
</span>
<span></span><span># ä¿®æ”¹ç¬¬ä¸€å±‚</span><span>
</span><span>b[</span>0<span>] = </span>999<span>
</span>
<span></span><span># ä¿®æ”¹åµŒå¥—åˆ—è¡¨</span><span>
</span><span>b[</span>2<span>][</span>0<span>] = </span>888<span>
</span>
<span></span><span>print</span><span>(</span><span>"a:"</span><span>, a)  </span><span># a: [1, 2, [888, 4]]</span><span>
</span><span></span><span>print</span><span>(</span><span>"b:"</span><span>, b)  </span><span># b: [999, 2, [888, 4]]</span></code></pre></div></div></pre>

### ğŸ¤” å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">text</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>a â†’ [1, 2, â”€â”€â†’ [3, 4] â†â”€â”€â”€ bï¼ˆæµ…æ‹·è´ï¼‰
</span>b â†’ [999, 2, â”€â”€â”˜</code></pre></div></div></pre>

* åˆ—è¡¨å¯¹è±¡æœ¬èº«è¢«å¤åˆ¶äº†ï¼ˆ`b` æ˜¯æ–°åˆ—è¡¨ï¼‰
* ä½†åµŒå¥—çš„ `[3,4]` **æ²¡æœ‰è¢«å¤åˆ¶**ï¼Œ`a[2]` å’Œ `b[2]` ä»æŒ‡å‘åŒä¸€ä¸ªåˆ—è¡¨

ğŸ‘‰ æ‰€ä»¥ä¿®æ”¹ `b[2][0]` ä¼šå½±å“ `a[2][0]`

> âœ… æµ…æ‹·è´ï¼šåªå¤åˆ¶æœ€å¤–å±‚å®¹å™¨ï¼Œå†…éƒ¨å¯¹è±¡ä»å…±äº«ã€‚

---

## âœ… ä¸‰ã€3. æ·±æ‹·è´ï¼ˆDeep Copyï¼‰

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">python</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>a = [</span>1<span>, </span>2<span>, [</span>3<span>, </span>4<span>]]
</span><span>b = copy.deepcopy(a)  </span><span># æ·±æ‹·è´</span><span>
</span>
<span>b[</span>0<span>] = </span>999<span>
</span><span>b[</span>2<span>][</span>0<span>] = </span>888<span>
</span>
<span></span><span>print</span><span>(</span><span>"a:"</span><span>, a)  </span><span># a: [1, 2, [3, 4]]</span><span>
</span><span></span><span>print</span><span>(</span><span>"b:"</span><span>, b)  </span><span># b: [999, 2, [888, 4]]</span></code></pre></div></div></pre>

### ğŸ¤” å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">text</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>a â†’ [1, 2, â”€â”€â†’ [3, 4]
</span>b â†’ [999, 2, â”€â”€â†’ [888, 4]</code></pre></div></div></pre>

* æ‰€æœ‰å±‚çº§éƒ½è¢«é€’å½’å¤åˆ¶
* `a` å’Œ `b` å®Œå…¨ç‹¬ç«‹

> âœ… æ·±æ‹·è´ï¼šåˆ›å»ºä¸€ä¸ª**å®Œå…¨ç‹¬ç«‹çš„å‰¯æœ¬**ï¼Œä¿®æ”¹äº’ä¸å½±å“ã€‚

## âœ… å››ã€è‡ªå®šä¹‰ç±»ä¸­çš„æ‹·è´è¡Œä¸º

Python å…è®¸ä½ åœ¨ç±»ä¸­è‡ªå®šä¹‰æ‹·è´è¡Œä¸ºï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">python</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>import</span><span> copy
</span>
<span></span>class Person:<span>
</span><span>    </span>def __init__(self, name, age, hobbies):<span>
</span>        self.name = name
        self.age = age
<span>        self.hobbies = hobbies  </span><span># list</span><span>
</span>
<span>    </span>def __repr__(self):<span>
</span><span>        </span><span>return</span><span> </span><span>f"Person(</span>{self.name}<span>, </span>{self.age}<span>, </span>{self.hobbies}<span>)"</span><span>
</span>
<span></span><span># åˆ›å»ºå¯¹è±¡</span><span>
</span><span>p1 = Person(</span><span>"Alice"</span><span>, </span>25<span>, [</span><span>"reading"</span><span>, </span><span>"music"</span><span>])
</span>
<span></span><span># æµ…æ‹·è´</span><span>
</span>p2 = copy.copy(p1)
<span>p2.hobbies.append(</span><span>"painting"</span><span>)
</span>
<span></span><span>print</span><span>(</span><span>"p1:"</span><span>, p1)  </span><span># hobbies åŒ…å« paintingï¼</span><span>
</span><span></span><span>print</span><span>(</span><span>"p2:"</span><span>, p2)
</span>
<span></span><span># æ·±æ‹·è´</span><span>
</span>p3 = copy.deepcopy(p1)
<span>p3.hobbies.append(</span><span>"dancing"</span><span>)
</span>
<span></span><span>print</span><span>(</span><span>"p1:"</span><span>, p1)  </span><span># hobbies ä¸å˜</span><span>
</span><span></span><span>print</span><span>(</span><span>"p3:"</span><span>, p3)</span></code></pre></div></div></pre>

è¾“å‡ºï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">text</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>p1: Person(Alice, </span>25<span>, [</span><span>'reading'</span><span>, </span><span>'music'</span><span>, </span><span>'painting'</span><span>])
</span><span>p2: Person(Alice, </span>25<span>, [</span><span>'reading'</span><span>, </span><span>'music'</span><span>, </span><span>'painting'</span><span>])
</span><span>p1: Person(Alice, </span>25<span>, [</span><span>'reading'</span><span>, </span><span>'music'</span><span>, </span><span>'painting'</span><span>])
</span><span>p3: Person(Alice, </span>25<span>, [</span><span>'reading'</span><span>, </span><span>'music'</span><span>, </span><span>'painting'</span><span>, </span><span>'dancing'</span><span>])</span></code></pre></div></div></pre>

---

## âœ… äº”ã€C++ vs Python æ‹·è´å¯¹æ¯”


| ç‰¹æ€§         | C++                    | Python                                        |
| ------------ | ---------------------- | --------------------------------------------- |
| é»˜è®¤æ‹·è´è¡Œä¸º | æµ…æ‹·è´ï¼ˆä½æ‹·è´ï¼‰       | èµ‹å€¼æ˜¯å¼•ç”¨                                    |
| æ·±æ‹·è´       | éœ€æ‰‹åŠ¨å®ç°æ‹·è´æ„é€ å‡½æ•° | `copy.deepcopy()`                             |
| æ‹·è´æ„é€ å‡½æ•° | æœ‰ï¼ˆ`T(const T&)`ï¼‰    | æ— ï¼Œä½†å¯é€šè¿‡`__copy__`, `__deepcopy__` è‡ªå®šä¹‰ |
| å†…å­˜ç®¡ç†     | æ‰‹åŠ¨æˆ–æ™ºèƒ½æŒ‡é’ˆ         | è‡ªåŠ¨åƒåœ¾å›æ”¶                                  |
| æ€§èƒ½         | æ·±æ‹·è´å¯èƒ½æ…¢           | æ·±æ‹·è´é€’å½’ï¼Œå¯èƒ½å¾ˆæ…¢                          |

---

## âœ… å…­ã€å¦‚ä½•è‡ªå®šä¹‰æ‹·è´è¡Œä¸ºï¼ˆé«˜çº§ï¼‰

ä½ å¯ä»¥é‡å†™ `__copy__` å’Œ `__deepcopy__`ï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">python</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>import</span><span> copy
</span>
<span></span>class MyClass:<span>
</span><span>    </span>def __init__(self, x, y):<span>
</span>        self.x = x
        self.y = y

<span>    </span>def __copy__(self):<span>
</span><span>        </span><span># è‡ªå®šä¹‰æµ…æ‹·è´</span><span>
</span><span>        </span><span>return</span><span> MyClass(self.x, self.y)
</span>
<span>    </span>def __deepcopy__(self, memo):<span>
</span><span>        </span><span># è‡ªå®šä¹‰æ·±æ‹·è´</span><span>
</span><span>        </span><span>return</span><span> MyClass(copy.deepcopy(self.x, memo), copy.deepcopy(self.y, memo))</span></code></pre></div></div></pre>

---

## âœ… ä¸ƒã€æ€»ç»“


| é—®é¢˜                          | ç­”æ¡ˆ                                          |
| ----------------------------- | --------------------------------------------- |
| **Python æœ‰æ‹·è´æ„é€ å‡½æ•°å—ï¼Ÿ** | âŒ æ²¡æœ‰ C++ é‚£ç§è¯­æ³•ï¼Œä½†æœ‰ç±»ä¼¼è¯­ä¹‰            |
| **Python çš„æµ…æ‹·è´æ˜¯å•¥ï¼Ÿ**     | `copy.copy()`ï¼šå¤åˆ¶æœ€å¤–å±‚ï¼ŒåµŒå¥—å¯¹è±¡å…±äº«       |
| **Python çš„æ·±æ‹·è´æ˜¯å•¥ï¼Ÿ**     | `copy.deepcopy()`ï¼šé€’å½’å¤åˆ¶æ‰€æœ‰å±‚çº§ï¼Œå®Œå…¨ç‹¬ç«‹ |
| **é»˜è®¤èµ‹å€¼ `=` æ˜¯æ‹·è´å—ï¼Ÿ**   | âŒ ä¸æ˜¯ï¼Œåªæ˜¯å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰                     |
| **ä»€ä¹ˆæ—¶å€™ç”¨æ·±æ‹·è´ï¼Ÿ**        | å½“å¯¹è±¡åŒ…å«å¯å˜åµŒå¥—ç»“æ„ï¼ˆå¦‚ list of listsï¼‰æ—¶  |

---

### ğŸ¯ æœ€ç»ˆå£è¯€ï¼š

> **â€œPython ä¸­ï¼š**
>
> * `=` æ˜¯**å¼•ç”¨**
> * `copy.copy()` æ˜¯**æµ…æ‹·è´**
> * `copy.deepcopy()` æ˜¯**æ·±æ‹·è´**
> * åµŒå¥—å¯å˜å¯¹è±¡ï¼Œå¿…é¡»ç”¨ `deepcopy`â€



# C++ ç®­å¤´æ“ä½œç¬¦


## ğŸ¯ ä¸€ã€C++ ç®­å¤´æ“ä½œç¬¦ï¼ˆ`->`ï¼‰è¯¦è§£

### âœ… åŸºæœ¬æ¦‚å¿µ

**ç®­å¤´æ“ä½œç¬¦ `->`** æ˜¯ç”¨äºé€šè¿‡ **æŒ‡é’ˆè®¿é—®å¯¹è±¡æˆå‘˜** çš„è¿ç®—ç¬¦ã€‚

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>T* ptr = &obj;
</span><span>ptr->member;  </span><span>// ç­‰ä»·äº (*ptr).member</span></code></pre></div></div></pre>

> âš ï¸ æ³¨æ„ï¼š`ptr` å¿…é¡»æ˜¯ä¸€ä¸ªæŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆï¼Œä¸èƒ½ç›´æ¥å¯¹å¯¹è±¡ä½¿ç”¨ `->`ã€‚

---

## ğŸ” äºŒã€1. åŸºæœ¬ç”¨æ³•ï¼šé€šè¿‡æŒ‡é’ˆè°ƒç”¨æˆå‘˜å‡½æ•°æˆ–è®¿é—®æˆå‘˜å˜é‡

### ğŸ“Œ å›¾ç‰‡ä¸­çš„ä¾‹å­ï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code>class Entity {<span>
</span><span></span><span>public</span><span>:
</span><span>    </span>void Print() const <span>{ </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"Hello!"</span><span> << </span><span>std</span><span>::</span><span>endl</span><span>; }
</span>};

<span></span>int main() <span>{
</span>    Entity e;
    Entity* ptr = &e;

<span>    e.Print();        </span><span>// ç›´æ¥è°ƒç”¨</span><span>
</span><span>    ptr->Print();     </span><span>// é€šè¿‡æŒ‡é’ˆè°ƒç”¨</span><span>
</span><span>    (*ptr).Print();   </span><span>// ç­‰ä»·å†™æ³•ï¼Œä½†æ›´ç¹ç</span><span>
</span>}</code></pre></div></div></pre>

### âœ… ä¸ºä»€ä¹ˆç”¨ `->`ï¼Ÿ

* æ›´ç®€æ´
* é¿å…æ‹¬å·ä¼˜å…ˆçº§é—®é¢˜
* æ˜¯ C++ çš„æ ‡å‡†è¯­æ³•

> ğŸ’¡ `ptr->Print()` å®é™…ä¸Šæ˜¯ `(*ptr).Print()` çš„å¿«æ·æ–¹å¼ã€‚


## ä¸‰ã€2. ç®­å¤´æ“ä½œç¬¦é‡è½½ï¼ˆOperator Overloadingï¼‰

### ğŸ“Œ åœºæ™¯ï¼šå®ç°æ™ºèƒ½æŒ‡é’ˆç±»

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª `ScopedPtr` ç±»ï¼Œå°è£…äº†å †åˆ†é…çš„å¯¹è±¡ï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code>class Entity {<span>
</span><span></span><span>public</span><span>:
</span><span>    </span>void Print() const <span>{ </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"Hello from Entity!"</span><span> << </span><span>std</span><span>::</span><span>endl</span><span>; }
</span>};

<span></span>class ScopedPtr {<span>
</span><span></span><span>private</span><span>:
</span>    Entity* m_Obj;

<span></span><span>public</span><span>:
</span>    ScopedPtr(Entity* entity) : m_Obj(entity) {}
<span>    ~ScopedPtr() { </span><span>delete</span><span> m_Obj; }
</span>
<span>    </span><span>// é‡è½½ -> æ“ä½œç¬¦</span><span>
</span><span>    Entity* </span><span>operator</span><span>->() {
</span><span>        </span><span>return</span><span> m_Obj;
</span>    }
};</code></pre></div></div></pre>

### âœ… ä½¿ç”¨æ–¹å¼ï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code>int main() <span>{
</span><span>    ScopedPtr entity = </span><span>new</span><span> Entity();
</span><span>    entity->Print();  </span><span>// âœ… æ­£å¸¸è¿è¡Œï¼</span><span>
</span><span>    </span><span>return</span><span> </span>0<span>;
</span>}</code></pre></div></div></pre>

### ğŸ”¥ å…³é”®ç‚¹ï¼š

* `operator->()` è¿”å›ä¸€ä¸ªæŒ‡å‘ `Entity` çš„æŒ‡é’ˆ
* C++ ä¼šè‡ªåŠ¨é“¾å¼è°ƒç”¨ï¼š`entity->Print()` â†’ å…ˆè°ƒç”¨ `operator->()` è¿”å› `m_Obj`ï¼Œå†è°ƒç”¨ `m_Obj->Print()`
* è¿™æ ·å¯ä»¥è®©è‡ªå®šä¹‰ç±»åƒæ™®é€šæŒ‡é’ˆä¸€æ ·ä½¿ç”¨


## å››ã€3. é«˜çº§æŠ€å·§ï¼šåˆ©ç”¨ç©ºæŒ‡é’ˆè·å–æˆå‘˜åç§»é‡

### ğŸ“Œ å›¾ç‰‡ä¸­çš„â€œå½©è›‹â€ï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line" data-spm-anchor-id="5176.28103460.0.i16.5e842e317tzBAH"></use></svg></span></div></div></div><pre><code data-spm-anchor-id="5176.28103460.0.i15.5e842e317tzBAH">struct Vector3 {<span>
</span><span>    </span><span>float</span><span> x, y, z;
</span>};

<span></span><span>int</span><span> offset = (</span><span>int</span><span>)&((Vector3*)</span>0<span>)->x;
</span><span></span><span>std</span><span>::</span><span>cout</span><span> << offset << </span><span>std</span><span>::</span><span>endl</span><span>;  </span><span>// è¾“å‡º: 0</span></code></pre></div></div></pre>

### âœ… åˆ†æ­¥è§£é‡Šï¼š


| è¡¨è¾¾å¼              | å«ä¹‰                                       |
| ------------------- | ------------------------------------------ |
| `(Vector3*)0`       | å°†æ•´æ•° 0 å¼ºåˆ¶è½¬æ¢ä¸º`Vector3*` ç±»å‹çš„ç©ºæŒ‡é’ˆ |
| `((Vector3*)0)->x`  | è®¿é—®è¯¥â€œç©ºæŒ‡é’ˆâ€æ‰€æŒ‡å‘çš„`x` æˆå‘˜           |
| `&((Vector3*)0)->x` | è·å–`x` æˆå‘˜çš„åœ°å€ï¼ˆè™½ç„¶æŒ‡é’ˆæ˜¯ç©ºçš„ï¼‰       |
| `(int)&(...)`       | å°†åœ°å€è½¬ä¸ºæ•´æ•°ï¼Œå¾—åˆ°åç§»é‡                 |

> âœ… ç»“æœï¼š`x` çš„åç§»é‡æ˜¯ 0ï¼Œ`y` æ˜¯ 4ï¼Œ`z` æ˜¯ 8ï¼ˆå› ä¸º `float` æ˜¯ 4 å­—èŠ‚ï¼‰

### âœ… å®Œæ•´ä»£ç æ¼”ç¤ºï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>#</span>include<span> </span><iostream><span>
</span>
<span></span>struct Vector3 {<span>
</span><span>    </span><span>float</span><span> x, y, z;
</span>};

<span></span>int main() <span>{
</span><span>    </span><span>int</span><span> offset_x = (</span><span>int</span><span>)&((Vector3*)</span>0<span>)->x;
</span><span>    </span><span>int</span><span> offset_y = (</span><span>int</span><span>)&((Vector3*)</span>0<span>)->y;
</span><span>    </span><span>int</span><span> offset_z = (</span><span>int</span><span>)&((Vector3*)</span>0<span>)->z;
</span>
<span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"x offset: "</span><span> << offset_x << </span><span>std</span><span>::</span><span>endl</span><span>;  </span><span>// 0</span><span>
</span><span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"y offset: "</span><span> << offset_y << </span><span>std</span><span>::</span><span>endl</span><span>;  </span><span>// 4</span><span>
</span><span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"z offset: "</span><span> << offset_z << </span><span>std</span><span>::</span><span>endl</span><span>;  </span><span>// 8</span><span>
</span>
<span>    </span><span>return</span><span> </span>0<span>;
</span>}</code></pre></div></div></pre>

### â—ï¸ é‡è¦è¯´æ˜ï¼š

* è¿™ä¸ªæŠ€å·§ä¾èµ–äº C++ çš„å†…å­˜å¸ƒå±€è§„åˆ™
* è™½ç„¶ `((Vector3*)0)` æ˜¯ç©ºæŒ‡é’ˆï¼Œä½† **åªç”¨äºè·å–åç§»é‡ï¼Œä¸å®é™…è®¿é—®å†…å­˜**
* æ˜¯ä¸€ç§â€œåˆæ³•çš„æœªå®šä¹‰è¡Œä¸ºâ€ï¼ˆundefined behaviorï¼‰ï¼Œä½†å¤§å¤šæ•°ç¼–è¯‘å™¨æ”¯æŒ
* å¸¸ç”¨äº **åºåˆ—åŒ–ã€åå°„ã€å†…å­˜æ˜ å°„** ç­‰åº•å±‚ç¼–ç¨‹

---

## âœ… äº”ã€æ€»ç»“å›¾è§£

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">text</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>æ™®é€šç”¨æ³•ï¼š
</span>Entity* ptr = &e;
<span>ptr->Print();  â†’ ç­‰ä»·äº (*ptr).</span><span>Print</span><span>()
</span>
é‡è½½ç”¨æ³•ï¼š
<span>ScopedPtr sp(</span><span>new</span><span> Entity());
</span>sp->Print();   â†’ è°ƒç”¨ operator->() è¿”å›æŒ‡é’ˆï¼Œå†è°ƒç”¨æ–¹æ³•

åç§»é‡æŠ€å·§ï¼š
<span>((Vector3*)</span>0<span>)->x â†’ è·å– x æˆå‘˜çš„å†…å­˜åç§»é‡ï¼ˆ</span>0<span>å­—èŠ‚ï¼‰</span></code></pre></div></div></pre>

---

## âœ… å…­ã€å®Œæ•´å¯è¿è¡Œä»£ç ï¼ˆæ•´åˆæ‰€æœ‰çŸ¥è¯†ç‚¹ï¼‰

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>#</span>include<span> </span><iostream><span>
</span>
<span></span><span>// 1. åŸºæœ¬ç»“æ„ä½“</span><span>
</span><span></span>struct Vector3 {<span>
</span><span>    </span><span>float</span><span> x, y, z;
</span>};

<span></span><span>// 2. å®ä½“ç±»</span><span>
</span><span></span>class Entity {<span>
</span><span></span><span>public</span><span>:
</span><span>    </span>void Print() const <span>{ </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"Hello from Entity!"</span><span> << </span><span>std</span><span>::</span><span>endl</span><span>; }
</span>};

<span></span><span>// 3. æ™ºèƒ½æŒ‡é’ˆç±»ï¼ˆé‡è½½ ->ï¼‰</span><span>
</span><span></span>class ScopedPtr {<span>
</span><span></span><span>private</span><span>:
</span>    Entity* m_Obj;

<span></span><span>public</span><span>:
</span>    ScopedPtr(Entity* entity) : m_Obj(entity) {}
<span>    ~ScopedPtr() { </span><span>delete</span><span> m_Obj; }
</span>
<span>    Entity* </span><span>operator</span><span>->() {
</span><span>        </span><span>return</span><span> m_Obj;
</span>    }
};

<span></span><span>// 4. ä¸»å‡½æ•°</span><span>
</span><span></span>int main() <span>{
</span><span>    </span><span>// ç¤ºä¾‹1ï¼šåŸºæœ¬ç®­å¤´æ“ä½œç¬¦</span><span>
</span>    Entity e;
    Entity* ptr = &e;
    ptr->Print();

<span>    </span><span>// ç¤ºä¾‹2ï¼šç®­å¤´æ“ä½œç¬¦é‡è½½</span><span>
</span><span>    ScopedPtr scoped_entity = </span><span>new</span><span> Entity();
</span><span>    scoped_entity->Print();  </span><span>// é€šè¿‡é‡è½½çš„ -> è°ƒç”¨</span><span>
</span>
<span>    </span><span>// ç¤ºä¾‹3ï¼šè·å–æˆå‘˜åç§»é‡</span><span>
</span><span>    </span><span>int</span><span> offset_x = (</span><span>int</span><span>)&((Vector3*)</span>0<span>)->x;
</span><span>    </span><span>int</span><span> offset_y = (</span><span>int</span><span>)&((Vector3*)</span>0<span>)->y;
</span><span>    </span><span>int</span><span> offset_z = (</span><span>int</span><span>)&((Vector3*)</span>0<span>)->z;
</span>
<span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"x offset: "</span><span> << offset_x << </span><span>std</span><span>::</span><span>endl</span><span>;
</span><span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"y offset: "</span><span> << offset_y << </span><span>std</span><span>::</span><span>endl</span><span>;
</span><span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"z offset: "</span><span> << offset_z << </span><span>std</span><span>::</span><span>endl</span><span>;
</span>
<span>    </span><span>return</span><span> </span>0<span>;
</span>}</code></pre></div></div></pre>

---

## âœ… ä¸ƒã€è¾“å‡ºç»“æœ

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">text</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>Hello </span><span>from</span><span> Entity!
</span><span>Hello </span><span>from</span><span> Entity!
</span><span>x offset: </span>0<span>
</span><span>y offset: </span>4<span>
</span><span>z offset: </span>8</code></pre></div></div></pre>

---

## âœ… å…«ã€å…³é”®æ€»ç»“


| æ¦‚å¿µ       | è¯´æ˜                                       |
| ---------- | ------------------------------------------ |
| `->` ç”¨æ³•  | é€šè¿‡æŒ‡é’ˆè®¿é—®æˆå‘˜ï¼Œç­‰ä»·äº`(*ptr).member`    |
| é‡è½½`->`   | å¯è®©è‡ªå®šä¹‰ç±»åƒæŒ‡é’ˆä¸€æ ·ä½¿ç”¨ï¼Œå¸¸è§äºæ™ºèƒ½æŒ‡é’ˆ |
| ç©ºæŒ‡é’ˆæŠ€å·§ | è·å–æˆå‘˜åç§»é‡ï¼Œç”¨äºåº•å±‚å¼€å‘               |
| å®‰å…¨æ€§     | é‡è½½`->` æ—¶è¦è¿”å›æœ‰æ•ˆæŒ‡é’ˆï¼Œé¿å…æ‚¬ç©ºæŒ‡é’ˆ    |

---

## ğŸ¯ æœ€ç»ˆå£è¯€

> **â€œç®­å¤´ `->` æ˜¯æŒ‡é’ˆçš„é—¨é’¥åŒ™ï¼Œ****é‡è½½å®ƒï¼Œè®©ä½ çš„ç±»åƒæŒ‡é’ˆä¸€æ ·çµæ´»ï¼Œ****ç©ºæŒ‡é’ˆä¹Ÿèƒ½ç®—åç§»ï¼Œè¿™æ˜¯ C++ çš„é«˜çº§é­”æ³•ï¼**
>
