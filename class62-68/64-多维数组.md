# C++ å¤šç»´æ•°ç»„ï¼ˆMultidimensional Arraysï¼‰è¯´æ˜ä¸æ€»ç»“

## ä¸€ã€ä»€ä¹ˆæ˜¯å¤šç»´æ•°ç»„ï¼Ÿ

å¤šç»´æ•°ç»„æ˜¯â€œæ•°ç»„çš„æ•°ç»„â€ã€‚æœ€å¸¸è§çš„æ˜¯äºŒç»´æ•°ç»„ï¼ˆ2Dï¼‰ï¼Œç”¨äºè¡¨ç¤ºçŸ©é˜µã€ç½‘æ ¼ã€å›¾åƒåƒç´ ç­‰ã€‚

ä¾‹å¦‚ï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>int</span><span> grid[</span>3<span>][</span>3<span>]; </span><span>// 3x3 çš„æ•´æ•°ç½‘æ ¼</span></code></pre></div></div></pre>

åœ¨å†…å­˜ä¸­ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª**è¿ç»­çš„çº¿æ€§å—**ï¼ŒæŒ‰è¡Œä¸»åºï¼ˆrow-major orderï¼‰å­˜å‚¨ã€‚

## äºŒã€æ ¸å¿ƒè¦ç‚¹æ€»ç»“


| ç‰¹æ€§             | è¯´æ˜                                                 |
| ---------------- | ---------------------------------------------------- |
| **è¯­æ³•**         | `type arr[rows][cols];`ï¼ˆç¼–è¯‘æ—¶å¸¸é‡å¤§å°ï¼‰            |
| **å†…å­˜å¸ƒå±€**     | è¿ç»­å­˜å‚¨ï¼ŒæŒ‰è¡Œä¼˜å…ˆæ’åˆ—ï¼ˆC/C++ æ ‡å‡†ï¼‰                 |
| **è®¿é—®æ–¹å¼**     | `arr[i][j]` è¡¨ç¤ºç¬¬ `i` è¡Œç¬¬ `j` åˆ—                   |
| **åŠ¨æ€åˆ†é…**     | å¯ç”¨`new` æ‰‹åŠ¨åˆ›å»ºï¼Œä½†éœ€æ³¨æ„ç¼“å­˜å‹å¥½æ€§               |
| **æ¨èæ›¿ä»£æ–¹æ¡ˆ** | ä½¿ç”¨`std::vector<std::vector<T>>` æˆ–ä¸€ç»´æ•°ç»„æ¨¡æ‹ŸäºŒç»´ |

> ğŸ”” **å…³é”®è­¦å‘Š**ï¼šä½¿ç”¨æŒ‡é’ˆæ•°ç»„ï¼ˆå¦‚ `int**`ï¼‰åˆ›å»ºçš„â€œä¼ªäºŒç»´æ•°ç»„â€ä¼šå¯¼è‡´**ç¼“å­˜ä¸å‘½ä¸­ï¼ˆcache missï¼‰**ï¼Œæ€§èƒ½è¾ƒå·®ï¼

## ä¸‰ã€é™æ€å¤šç»´æ•°ç»„ï¼ˆæ ˆä¸Šåˆ†é…ï¼‰

é€‚ç”¨äºå°å°ºå¯¸ã€ç¼–è¯‘æ—¶çŸ¥é“å¤§å°çš„æƒ…å†µã€‚

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>int</span><span> arr[</span>3<span>][</span>4<span>]; // </span>3<span>è¡Œ</span>4<span>åˆ—ï¼Œå…±</span>12<span>ä¸ª</span><span>int</span></code></pre></div></div></pre>

### ç‰¹ç‚¹ï¼š

* è‡ªåŠ¨ç®¡ç†å†…å­˜
* è®¿é—®é€Ÿåº¦å¿«ï¼ˆè¿ç»­å†…å­˜ï¼‰
* å¤§å°å¿…é¡»æ˜¯ç¼–è¯‘æ—¶å¸¸é‡

## å››ã€åŠ¨æ€å¤šç»´æ•°ç»„ï¼ˆå †ä¸Šåˆ†é…ï¼‰

å½“è¡Œæ•°åˆ—æ•°åœ¨è¿è¡Œæ—¶æ‰ç¡®å®šæ—¶ä½¿ç”¨ã€‚

### âŒ æ–¹æ³•1ï¼šæŒ‡é’ˆçš„æŒ‡é’ˆï¼ˆä¸æ¨è â€”â€” ç¼“å­˜ä¸å‹å¥½ï¼‰

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>int</span><span>** grid = </span><span>new</span><span> </span><span>int</span><span>*[rows];
</span><span></span><span>for</span><span> (</span><span>int</span><span> i = </span>0<span>; i < rows; ++i) {
</span><span>    grid[i] = </span><span>new</span><span> </span><span>int</span><span>[cols];
</span>}</code></pre></div></div></pre>

#### é—®é¢˜ï¼š

* æ¯ä¸€è¡Œå¯èƒ½åˆ†é…åœ¨å†…å­˜ä¸åŒä½ç½® â†’ **å†…å­˜ç¢ç‰‡**
* éå†æ—¶é¢‘ç¹å‘ç”Ÿ **ç¼“å­˜æœªå‘½ä¸­ï¼ˆcache missï¼‰**
* éœ€è¦åŒé‡å¾ªç¯é‡Šæ”¾å†…å­˜
* å®¹æ˜“å†…å­˜æ³„æ¼

### âœ… æ–¹æ³•2ï¼šå•å—å†…å­˜æ¨¡æ‹ŸäºŒç»´æ•°ç»„ï¼ˆæ¨èï¼‰

å°†äºŒç»´æ•°ç»„æ˜ å°„åˆ°ä¸€ç»´æ•°ç»„ï¼Œé€šè¿‡ç´¢å¼•è®¡ç®—è®¿é—®ï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>int</span><span>* flat = </span><span>new</span><span> </span><span>int</span><span>[rows * cols];
</span>
<span></span><span>// è®¿é—® [i][j] å…ƒç´ </span><span>
</span>flat[i * cols + j] = value;</code></pre></div></div></pre>

#### ä¼˜ç‚¹ï¼š

* å†…å­˜è¿ç»­ â†’ ç¼“å­˜å‘½ä¸­ç‡é«˜ â†’ æ€§èƒ½æ›´å¥½
* åªéœ€ä¸€æ¬¡ `new` å’Œä¸€æ¬¡ `delete[]`
* æ˜“äºä¼ é€’ç»™å‡½æ•°

## äº”ã€ç°ä»£ C++ æ¨èæ–¹å¼ï¼š`std::vector`

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>std</span><span>::</span><span>vector</span><span><</span><span>std</span><span>::</span><span>vector</span><span><</span><span>int</span><span>>> grid(rows, </span><span>std</span><span>::</span><span>vector</span><span><</span><span>int</span><span>>(cols));</span></code></pre></div></div></pre>

æˆ–æ›´é«˜æ•ˆçš„ä¸€ç»´åŒ…è£…ï¼š

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code>std::vector<int> grid(rows * cols)<span>;
</span><span></span><span>// ä½¿ç”¨ grid[i * cols + j]</span></code></pre></div></div></pre>

## å…­ã€å¯è¿è¡Œå®Œæ•´ä»£ç ç¤ºä¾‹

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>#</span>include<span> </span><iostream><span>
</span><span></span><span>#</span>include<span> </span><vector><span>
</span><span></span><span>#</span>include<span> </span><chrono><span>
</span>
<span></span><span>// =============================</span><span>
</span><span></span><span>// ç¤ºä¾‹1ï¼šé™æ€äºŒç»´æ•°ç»„ï¼ˆæ ˆï¼‰</span><span>
</span><span></span><span>// =============================</span><span>
</span><span></span>void static_array_example() <span>{
</span><span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"=== 1. é™æ€äºŒç»´æ•°ç»„ ===\n"</span><span>;
</span><span>    </span><span>int</span><span> grid[</span>3<span>][</span>3<span>] = {
</span><span>        {</span>1<span>, </span>2<span>, </span>3<span>},
</span><span>        {</span>4<span>, </span>5<span>, </span>6<span>},
</span><span>        {</span>7<span>, </span>8<span>, </span>9<span>}
</span>    };

<span>    </span><span>for</span><span> (</span><span>int</span><span> i = </span>0<span>; i < </span>3<span>; ++i) {
</span><span>        </span><span>for</span><span> (</span><span>int</span><span> j = </span>0<span>; j < </span>3<span>; ++j) {
</span><span>            </span><span>std</span><span>::</span><span>cout</span><span> << grid[i][j] << </span><span>" "</span><span>;
</span>        }
<span>        </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"\n"</span><span>;
</span>    }
}

<span></span><span>// =============================</span><span>
</span><span></span><span>// ç¤ºä¾‹2ï¼šåŠ¨æ€äºŒç»´æ•°ç»„ï¼ˆæŒ‡é’ˆæ•°ç»„ï¼‰â€”â€” ä¸æ¨è</span><span>
</span><span></span><span>// =============================</span><span>
</span><span></span>void bad_dynamic_example(int rows, int cols) <span>{
</span><span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"\n=== 2. åŠ¨æ€äºŒç»´æ•°ç»„ï¼ˆæŒ‡é’ˆæ•°ç»„ï¼‰â€”â€” ä¸æ¨è ===\n"</span><span>;
</span>
<span>    </span><span>int</span><span>** grid = </span><span>new</span><span> </span><span>int</span><span>*[rows];
</span><span>    </span><span>for</span><span> (</span><span>int</span><span> i = </span>0<span>; i < rows; ++i) {
</span><span>        grid[i] = </span><span>new</span><span> </span><span>int</span><span>[cols];
</span><span>        </span><span>for</span><span> (</span><span>int</span><span> j = </span>0<span>; j < cols; ++j) {
</span>            grid[i][j] = i * cols + j;
        }
    }

<span>    </span><span>// æ‰“å°</span><span>
</span><span>    </span><span>for</span><span> (</span><span>int</span><span> i = </span>0<span>; i < rows; ++i) {
</span><span>        </span><span>for</span><span> (</span><span>int</span><span> j = </span>0<span>; j < cols; ++j) {
</span><span>            </span><span>std</span><span>::</span><span>cout</span><span> << grid[i][j] << </span><span>" "</span><span>;
</span>        }
<span>        </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"\n"</span><span>;
</span>    }

<span>    </span><span>// é‡Šæ”¾å†…å­˜ï¼ˆå®¹æ˜“å‡ºé”™ï¼‰</span><span>
</span><span>    </span><span>for</span><span> (</span><span>int</span><span> i = </span>0<span>; i < rows; ++i) {
</span><span>        </span><span>delete</span><span>[] grid[i];
</span>    }
<span>    </span><span>delete</span><span>[] grid;
</span>}

<span></span><span>// =============================</span><span>
</span><span></span><span>// ç¤ºä¾‹3ï¼šä¸€ç»´æ•°ç»„æ¨¡æ‹ŸäºŒç»´ï¼ˆæ¨èï¼‰</span><span>
</span><span></span><span>// =============================</span><span>
</span><span></span>void flat_array_example(int rows, int cols) <span>{
</span><span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"\n=== 3. ä¸€ç»´æ•°ç»„æ¨¡æ‹ŸäºŒç»´ï¼ˆæ¨èï¼‰===\n"</span><span>;
</span>
<span>    </span><span>int</span><span>* grid = </span><span>new</span><span> </span><span>int</span><span>[rows * cols];
</span>
<span>    </span><span>// åˆå§‹åŒ–</span><span>
</span><span>    </span><span>for</span><span> (</span><span>int</span><span> i = </span>0<span>; i < rows; ++i) {
</span><span>        </span><span>for</span><span> (</span><span>int</span><span> j = </span>0<span>; j < cols; ++j) {
</span>            grid[i * cols + j] = i * cols + j;
        }
    }

<span>    </span><span>// æ‰“å°</span><span>
</span><span>    </span><span>for</span><span> (</span><span>int</span><span> i = </span>0<span>; i < rows; ++i) {
</span><span>        </span><span>for</span><span> (</span><span>int</span><span> j = </span>0<span>; j < cols; ++j) {
</span><span>            </span><span>std</span><span>::</span><span>cout</span><span> << grid[i * cols + j] << </span><span>" "</span><span>;
</span>        }
<span>        </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"\n"</span><span>;
</span>    }

<span>    </span><span>delete</span><span>[] grid;
</span>}

<span></span><span>// =============================</span><span>
</span><span></span><span>// ç¤ºä¾‹4ï¼šstd::vectorï¼ˆæœ€æ¨èï¼‰</span><span>
</span><span></span><span>// =============================</span><span>
</span><span></span>void vector_example(int rows, int cols) <span>{
</span><span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"\n=== 4. std::vectorï¼ˆæœ€æ¨èï¼‰===\n"</span><span>;
</span>
<span>    </span><span>// æ–¹å¼1ï¼švector of vectors</span><span>
</span><span>    </span><span>std</span><span>::</span><span>vector</span><span><</span><span>std</span><span>::</span><span>vector</span><span><</span><span>int</span><span>>> grid1(rows, </span><span>std</span><span>::</span><span>vector</span><span><</span><span>int</span><span>>(cols));
</span><span>    </span><span>for</span><span> (</span><span>int</span><span> i = </span>0<span>; i < rows; ++i) {
</span><span>        </span><span>for</span><span> (</span><span>int</span><span> j = </span>0<span>; j < cols; ++j) {
</span>            grid1[i][j] = i * cols + j;
        }
    }

<span>    </span><span>// æ‰“å°</span><span>
</span><span>    </span><span>for</span><span> (</span><span>const</span><span> </span><span>auto</span><span>& row : grid1) {
</span><span>        </span><span>for</span><span> (</span><span>int</span><span> val : row) {
</span><span>            </span><span>std</span><span>::</span><span>cout</span><span> << val << </span><span>" "</span><span>;
</span>        }
<span>        </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"\n"</span><span>;
</span>    }

<span>    </span><span>// æ–¹å¼2ï¼šå•ç»´ vector æ¨¡æ‹ŸäºŒç»´ï¼ˆæ›´é«˜æ€§èƒ½ï¼‰</span><span>
</span><span>    </span>std::vector<int> grid2(rows * cols)<span>;
</span><span>    </span><span>for</span><span> (</span><span>int</span><span> i = </span>0<span>; i < rows; ++i) {
</span><span>        </span><span>for</span><span> (</span><span>int</span><span> j = </span>0<span>; j < cols; ++j) {
</span>            grid2[i * cols + j] = i * cols + j;
        }
    }
}

<span></span><span>// =============================</span><span>
</span><span></span><span>// ç¤ºä¾‹5ï¼šæ€§èƒ½å¯¹æ¯”æµ‹è¯•</span><span>
</span><span></span><span>// =============================</span><span>
</span><span></span>void performance_test() <span>{
</span><span>    </span><span>const</span><span> </span><span>int</span><span> N = </span>1000<span>;
</span><span>    </span><span>const</span><span> </span><span>int</span><span> ITERATIONS = </span>100<span>;
</span>
<span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"\n=== 5. æ€§èƒ½å¯¹æ¯”æµ‹è¯•ï¼ˆ"</span><span> << N << </span><span>"x"</span><span> << N << </span><span>"ï¼‰===\n"</span><span>;
</span>
<span>    </span><span>// æµ‹è¯•ä¸€ç»´æ•°ç»„æ–¹å¼</span><span>
</span><span>    </span><span>int</span><span>* flat = </span><span>new</span><span> </span><span>int</span><span>[N * N];
</span><span>    </span><span>auto</span><span> start = </span><span>std</span><span>::chrono::steady_clock::now();
</span>
<span>    </span><span>for</span><span> (</span><span>int</span><span> loop = </span>0<span>; loop < ITERATIONS; ++loop) {
</span><span>        </span><span>for</span><span> (</span><span>int</span><span> i = </span>0<span>; i < N; ++i) {
</span><span>            </span><span>for</span><span> (</span><span>int</span><span> j = </span>0<span>; j < N; ++j) {
</span>                flat[i * N + j] = i + j;
            }
        }
    }

<span>    </span><span>auto</span><span> end = </span><span>std</span><span>::chrono::steady_clock::now();
</span><span>    </span><span>auto</span><span> flat_time = </span><span>std</span><span>::chrono::duration_cast<</span><span>std</span><span>::chrono::milliseconds>(end - start);
</span>
<span>    </span><span>delete</span><span>[] flat;
</span>
<span>    </span><span>// æµ‹è¯• vector of vectorï¼ˆç•¥æ…¢ï¼‰</span><span>
</span><span>    </span><span>std</span><span>::</span><span>vector</span><span><</span><span>std</span><span>::</span><span>vector</span><span><</span><span>int</span><span>>> grid(N, </span><span>std</span><span>::</span><span>vector</span><span><</span><span>int</span><span>>(N));
</span><span>    start = </span><span>std</span><span>::chrono::steady_clock::now();
</span>
<span>    </span><span>for</span><span> (</span><span>int</span><span> loop = </span>0<span>; loop < ITERATIONS; ++loop) {
</span><span>        </span><span>for</span><span> (</span><span>int</span><span> i = </span>0<span>; i < N; ++i) {
</span><span>            </span><span>for</span><span> (</span><span>int</span><span> j = </span>0<span>; j < N; ++j) {
</span>                grid[i][j] = i + j;
            }
        }
    }

<span>    end = </span><span>std</span><span>::chrono::steady_clock::now();
</span><span>    </span><span>auto</span><span> vec_time = </span><span>std</span><span>::chrono::duration_cast<</span><span>std</span><span>::chrono::milliseconds>(end - start);
</span>
<span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"ä¸€ç»´æ•°ç»„æ¨¡æ‹Ÿè€—æ—¶: "</span><span> << flat_time.count() << </span><span>" ms\n"</span><span>;
</span><span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"vector of vector è€—æ—¶: "</span><span> << vec_time.count() << </span><span>" ms\n"</span><span>;
</span><span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"(å·®å¼‚ä¸»è¦æ¥è‡ªç¼“å­˜å±€éƒ¨æ€§å’Œå†…å­˜åˆ†é…æ¨¡å¼)\n"</span><span>;
</span>}

<span></span><span>// =============================</span><span>
</span><span></span><span>// ä¸»å‡½æ•°</span><span>
</span><span></span><span>// =============================</span><span>
</span><span></span>int main() <span>{
</span>    static_array_example();
<span>    bad_dynamic_example(</span>4<span>, </span>5<span>);
</span><span>    flat_array_example(</span>4<span>, </span>5<span>);
</span><span>    vector_example(</span>4<span>, </span>5<span>);
</span>    performance_test();

<span>    </span><span>return</span><span> </span>0<span>;
</span>}</code></pre></div></div></pre>



## ä¹ã€æœ€ä½³å®è·µå»ºè®®


| åœºæ™¯                  | æ¨èæ–¹å¼                                        |
| --------------------- | ----------------------------------------------- |
| å°æ•°ç»„ã€å›ºå®šå¤§å°      | `int arr[rows][cols];`                          |
| å¤§æ•°ç»„ã€è¿è¡Œæ—¶å¤§å°    | `std::vector<int>` + ç´¢å¼•æ˜ å°„ `i * cols + j`    |
| éœ€è¦`grid[i][j]` è¯­æ³• | `std::vector<std::vector<int>>`ï¼ˆç‰ºç‰²ä¸€ç‚¹æ€§èƒ½ï¼‰ |
| é«˜æ€§èƒ½è®¡ç®—ã€æ¸¸æˆå¼€å‘  | å•å—å†…å­˜ + æ‰‹åŠ¨ç´¢å¼•è®¡ç®—                         |
| é¿å…ä½¿ç”¨              | `int**` + å¤šæ¬¡ `new`ï¼ˆé™¤éæœ‰ç‰¹æ®Šéœ€æ±‚ï¼‰          |


## åã€æ€»ç»“


| æ–¹æ³•                           | æ˜¯å¦æ¨è | åŸå›                  |
| ------------------------------ | -------- | -------------------- |
| `T arr[N][M]`                  | âœ…       | ç®€å•é«˜æ•ˆï¼Œé€‚åˆå°æ•°ç»„ |
| `T** grid = new T*[rows]; ...` | âŒ       | ç¼“å­˜ä¸å‹å¥½ï¼Œæ˜“å‡ºé”™   |
| `T* flat = new T[rows*cols]`   | âœ…       | å†…å­˜è¿ç»­ï¼Œæ€§èƒ½å¥½     |
| `std::vector<std::vector<T>>`  | âš ï¸     | æ–¹ä¾¿ä½†æ€§èƒ½ç•¥ä½       |
| `std::vector<T>` æ¨¡æ‹ŸäºŒç»´      | âœ…âœ…     | ç°ä»£ C++ æœ€ä½³å®è·µ    |
