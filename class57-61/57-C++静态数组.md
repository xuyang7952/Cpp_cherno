# C++ é™æ€æ•°ç»„ï¼ˆ`std::array`ï¼‰è¯´æ˜ä¸æ€»ç»“

`std::array` æ˜¯ C++11 å¼•å…¥çš„æ ‡å‡†åº“å®¹å™¨ï¼Œç”¨äºè¡¨ç¤º**å›ºå®šå¤§å°çš„é™æ€æ•°ç»„**ã€‚å®ƒç»“åˆäº†ä¼ ç»Ÿ C é£æ ¼æ•°ç»„çš„é«˜æ€§èƒ½å’Œç°ä»£ C++ å®¹å™¨çš„å®‰å…¨æ€§ä¸ä¾¿åˆ©æ€§ã€‚


#### **æ ¸å¿ƒç‰¹ç‚¹æ€»ç»“ï¼š**


| ç‰¹æ€§                       | è¯´æ˜                                                                                   |
| -------------------------- | -------------------------------------------------------------------------------------- |
| **æ ˆä¸Šåˆ†é…**               | `std::array` åœ¨æ ˆä¸Šåˆ†é…å†…å­˜ï¼Œä¸æ¶‰åŠå †æ“ä½œï¼Œæ€§èƒ½é«˜ä¸”æ— éœ€æ‰‹åŠ¨ç®¡ç†å†…å­˜ã€‚                  |
| **å›ºå®šå¤§å°**               | å¤§å°åœ¨ç¼–è¯‘æœŸç¡®å®šï¼Œä¸å¯åŠ¨æ€å¢é•¿æˆ–ç¼©å°ã€‚                                                 |
| **ç±»å‹å®‰å…¨**               | æ˜¯ä¸€ä¸ªç±»æ¨¡æ¿ï¼Œæ”¯æŒæ³›å‹ç¼–ç¨‹ï¼Œç±»å‹ä¿¡æ¯å®Œæ•´ã€‚                                             |
| **æ— é¢å¤–è¿è¡Œæ—¶å¼€é”€**       | `size()` æ˜¯ç¼–è¯‘æœŸå¸¸é‡ï¼Œç›´æ¥è¿”å›æ¨¡æ¿å‚æ•°ï¼Œæ²¡æœ‰å­˜å‚¨å¼€é”€ã€‚                                |
| **æ”¯æŒè¿­ä»£å™¨**             | å¯ä»¥ä½¿ç”¨`begin()`, `end()` è¿›è¡ŒèŒƒå›´éå†ï¼Œå…¼å®¹ STL ç®—æ³•ã€‚                               |
| **è¾¹ç•Œæ£€æŸ¥ï¼ˆDebug æ¨¡å¼ï¼‰** | è°ƒè¯•æ¨¡å¼ä¸‹ä½¿ç”¨`at()` ä¼šè¿›è¡Œè¶Šç•Œæ£€æŸ¥å¹¶æŠ›å‡ºå¼‚å¸¸ï¼›`operator[]` åˆ™ä¸ä¼šï¼ˆä¸åŸç”Ÿæ•°ç»„ä¸€è‡´ï¼‰ã€‚ |
| **å¯æ‹·è´èµ‹å€¼**             | å¯ä»¥åƒæ™®é€šå˜é‡ä¸€æ ·æ‹·è´ã€ä¼ é€’å‡½æ•°å‚æ•°ï¼Œè€ŒåŸç”Ÿæ•°ç»„ä¼šé€€åŒ–ä¸ºæŒ‡é’ˆã€‚                         |


#### ğŸ†š **`std::array` vs åŸç”Ÿæ•°ç»„ï¼ˆC é£æ ¼æ•°ç»„ï¼‰**


| å¯¹æ¯”é¡¹           | `std::array<int, 5>`              | `int arr[5]`                  |
| ---------------- | --------------------------------- | ----------------------------- |
| å†…å­˜ä½ç½®         | æ ˆ                                | æ ˆ                            |
| æ˜¯å¦å¯æ‹·è´       | âœ… æ”¯æŒæ‹·è´/èµ‹å€¼                  | âŒ ä¸èƒ½æ•´ä½“æ‹·è´               |
| æ˜¯å¦ä¿ç•™å¤§å°ä¿¡æ¯ | âœ…`size()` è¿”å› 5                 | âŒ ä¼ å‚æ—¶é€€åŒ–ä¸ºæŒ‡é’ˆï¼Œä¸¢å¤±å¤§å° |
| æ”¯æŒ STL ç®—æ³•    | âœ… æ”¯æŒ`sort`, `find` ç­‰          | âŒ ä¸ç›´æ¥æ”¯æŒ                 |
| è¾¹ç•Œæ£€æŸ¥         | âœ…`at()` æä¾›è°ƒè¯•æ£€æŸ¥             | âŒ æ— ä»»ä½•æ£€æŸ¥                 |
| æ€§èƒ½             | âš¡ï¸ ä¸åŸç”Ÿæ•°ç»„å®Œå…¨ç›¸åŒï¼ˆä¼˜åŒ–åï¼‰ | âš¡ï¸ ç›¸åŒ                     |

> âœ… **æ¨èä½¿ç”¨ `std::array` æ›¿ä»£åŸç”Ÿå›ºå®šæ•°ç»„ï¼Œæ›´å®‰å…¨ã€æ›´ç°ä»£ã€æ›´æ˜“ç”¨ï¼**


### **å¯è¿è¡Œä»£ç ç¤ºä¾‹ï¼ˆå®Œæ•´ç¨‹åºï¼‰**

<pre><div class="contain-layout-style rounded-12 bg-capsule relative flex min-h-[2em] flex-col"><div class="rounded-[12px] bg-[#fff]"><div class="h-[42px] sticky top-0 z-10 bg-capsule"><div class="flex items-center h-[42px] p-3 text-[14px] border border-[var(--ty-line-border)]" data-spm-anchor-id="5176.28103460.0.i7.228c2e31FrabiA"><span class="font-medium mr-auto first-letter:uppercase text-[rgba(17,17,51,0.7)]">cpp</span><div class="flex items-center gap-4"><div class="flex items-center justify-center gap-[2px] cursor-pointer text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon size-4 cursor-pointer"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-editingTools-line"></use></svg></span><span class="mt-[2px] text-[12px]">ç¼–è¾‘</span></div><div class="flex cursor-pointer gap-1 text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><span role="img" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-sun-line"></use></svg></span></div><span role="img" tabindex="-1" class="anticon flex cursor-pointer items-center text-[rgba(17,17,51,0.7)] hover:text-[#4433ff]"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#appicon-copy-line"></use></svg></span></div></div></div><pre><code><span>#</span>include<span> </span><iostream><span>
</span><span></span><span>#</span>include<span> </span><array><span>      </span><span>// å¿…é¡»åŒ…å«å¤´æ–‡ä»¶</span><span>
</span><span></span><span>#</span>include<span> </span><algorithm><span>  </span><span>// ç”¨äº std::sort ç­‰</span><span>
</span><span></span><span>#</span>include<span> </span><stdexcept><span>  </span><span>// ç”¨äºæ•è·å¼‚å¸¸</span><span>
</span>
<span></span><span>// æ‰“å°æ•°ç»„çš„æ¨¡æ¿å‡½æ•°</span><span>
</span><span></span>template<typename T, size_t N>
void PrintArray(const std::array<T, N>& arr) <span>{
</span><span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"Array contents: "</span><span>;
</span><span>    </span><span>for</span><span> (</span><span>const</span><span> </span><span>auto</span><span>& elem : arr) {  </span><span>// èŒƒå›´ for å¾ªç¯</span><span>
</span><span>        </span><span>std</span><span>::</span><span>cout</span><span> << elem << </span><span>" "</span><span>;
</span>    }
<span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"\n"</span><span>;
</span>}

<span></span><span>// ä½¿ç”¨è¿­ä»£å™¨éå†</span><span>
</span><span></span>template<typename T, size_t N>
void PrintWithIterator(const std::array<T, N>& arr) <span>{
</span><span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"Using iterator: "</span><span>;
</span><span>    </span><span>for</span><span> (</span><span>auto</span><span> it = arr.begin(); it != arr.end(); ++it) {
</span><span>        </span><span>std</span><span>::</span><span>cout</span><span> << *it << </span><span>" "</span><span>;
</span>    }
<span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"\n"</span><span>;
</span>}

<span></span>int main() <span>{
</span><span>    </span><span>// 1. å£°æ˜ä¸åˆå§‹åŒ–</span><span>
</span><span>    </span><span>std</span><span>::</span><span>array</span><span><</span><span>int</span><span>, 5> data = {</span>10<span>, </span>20<span>, </span>30<span>, </span>40<span>, </span>50<span>};  </span><span>// åˆå§‹åŒ–åˆ—è¡¨</span><span>
</span><span>    </span><span>std</span><span>::</span><span>array</span><span><</span><span>double</span><span>, 3> values{};                   </span><span>// å…¨éƒ¨åˆå§‹åŒ–ä¸º 0.0</span><span>
</span><span>    </span><span>std</span><span>::</span><span>array</span><span><</span><span>std</span><span>::</span><span>string</span><span>, 2> names = {</span><span>"Alice"</span><span>, </span><span>"Bob"</span><span>};
</span>
<span>    </span><span>// 2. è®¿é—®å…ƒç´ </span><span>
</span><span>    data[</span>0<span>] = </span>100<span>;                    </span><span>// ä½¿ç”¨ operator[]</span><span>
</span><span>    data.at(</span>4<span>) = </span>500<span>;                 </span><span>// ä½¿ç”¨ at()ï¼ˆå¸¦è¾¹ç•Œæ£€æŸ¥ï¼‰</span><span>
</span>
<span>    </span><span>// 3. å®‰å…¨è®¿é—®ç¤ºä¾‹ï¼ˆæ¼”ç¤ºå¼‚å¸¸å¤„ç†ï¼‰</span><span>
</span><span>    </span><span>try</span><span> {
</span><span>        data.at(</span>10<span>) = </span>999<span>;            </span><span>// è¶Šç•Œè®¿é—®ï¼ŒæŠ›å‡º std::out_of_range</span><span>
</span><span>    } </span><span>catch</span><span> (</span><span>const</span><span> </span><span>std</span><span>::out_of_range& e) {
</span><span>        </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"Error: "</span><span> << e.what() << </span><span>"\n"</span><span>;
</span>    }

<span>    </span><span>// 4. è·å–å¤§å°å’Œéå†</span><span>
</span><span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"Size of data: "</span><span> << data.size() << </span><span>"\n"</span><span>;     </span><span>// è¾“å‡º 5</span><span>
</span><span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"Is empty? "</span><span> << (data.empty() ? </span><span>"Yes"</span><span> : </span><span>"No"</span><span>) << </span><span>"\n"</span><span>;
</span>
    PrintArray(data);
    PrintWithIterator(data);

<span>    </span><span>// 5. ä½¿ç”¨ STL ç®—æ³•</span><span>
</span><span>    </span><span>std</span><span>::sort(data.begin(), data.end());
</span><span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"After sorting: "</span><span>;
</span>    PrintArray(data);

<span>    </span><span>// 6. æ‹·è´æ•°ç»„</span><span>
</span><span>    </span><span>std</span><span>::</span><span>array</span><span><</span><span>int</span><span>, 5> data_copy = data;  </span><span>// å®Œå…¨æ‹·è´</span><span>
</span><span>    data_copy[</span>0<span>] = </span>999<span>;
</span><span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"Original: "</span><span>;
</span>    PrintArray(data);
<span>    </span><span>std</span><span>::</span><span>cout</span><span> << </span><span>"Copy: "</span><span>;
</span>    PrintArray(data_copy);

<span>    </span><span>return</span><span> </span>0<span>;
</span>}</code></pre></div></div></pre>


### **æœ€ä½³å®è·µå»ºè®®ï¼š**

* âœ… ä¼˜å…ˆä½¿ç”¨ `std::array` æ›¿ä»£ `int arr[N]`ã€‚
* âœ… åœ¨å‡½æ•°å‚æ•°ä¸­ä¼ é€’æ—¶ä½¿ç”¨ `const std::array<T, N>&` é¿å…æ‹·è´ã€‚
* âœ… ä½¿ç”¨ `at()` è¿›è¡Œè°ƒè¯•é˜¶æ®µçš„è¾¹ç•Œæ£€æŸ¥ã€‚
* âœ… ç»“åˆ `auto` å’ŒèŒƒå›´ for å¾ªç¯æå‡ä»£ç å¯è¯»æ€§ã€‚
* âŒ ä¸è¦å¯¹ `std::array` çš„ `size()` æœ‰æ€§èƒ½é¡¾è™‘ â€”â€” å®ƒæ˜¯ç¼–è¯‘æœŸå¸¸é‡ï¼
